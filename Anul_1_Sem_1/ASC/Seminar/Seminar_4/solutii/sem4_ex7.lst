     1                                  bits 32
     2                                  global start
     3                                  
     4                                  extern exit, printf
     5                                  import exit msvcrt.dll
     6                                  import printf msvcrt.dll
     7                                  
     8                                  segment data use32 class=data
     9 00000000 616E6120617265206D-         text db "ana are mere capac un cojoc otto "
     9 00000009 657265206361706163-
     9 00000012 20756E20636F6A6F63-
     9 0000001B 206F74746F20       
    10                                      len equ $-text      ; numarul de caractere din text
    11                                      
    12 00000021 00<rept>                    cuvant times 50 db 0    ; are
    13 00000053 00<rept>                    invers times 50 db 0    ; era
    14                                      
    15 00000085 437576616E743A2025-         format db "Cuvant: %s", 13, 10, 0
    15 0000008E 730D0A00           
    16                                      
    17                                  ; 7. Se dă un unui șir de octeți reprezentând un text
    18                                  ; (o succesiune de șiruri de caractere separate prin spații).
    19                                  ; Să se determine cuvintele din șirul p care sunt palindroame
    20                                  ; (de exemplu: ana, coc, capac, cojoc etc.).
    21                                  segment code use32 class=code
    22                                      verific:
    23 00000000 49                              dec ecx             ; am iesit din ciclu deci ECX nu a fost decrementat
    24 00000001 51                              push ecx
    25 00000002 56                              push esi
    26 00000003 57                              push edi
    27                                          
    28                                          ; inversez cuvantul
    29 00000004 89D9                            mov ecx, ebx
    30 00000006 BE[21000000]                    mov esi, cuvant
    31 0000000B BF[53000000]                    mov edi, invers
    32 00000010 01DF                            add edi, ebx
    33 00000012 4F                              dec edi
    34                                      inverseaza:
    35 00000013 FC                              cld
    36 00000014 AC                              lodsb
    37 00000015 FD                              std
    38 00000016 AA                              stosb
    39 00000017 E2FA                            loop inverseaza
    40                                          
    41                                          ; verific daca e palindrom
    42 00000019 89D9                            mov ecx, ebx
    43 0000001B FC                              cld
    44 0000001C BE[21000000]                    mov esi, cuvant
    45 00000021 BF[53000000]                    mov edi, invers
    46 00000026 F3A6                            repe cmpsb
    47                                          
    48 00000028 83F900                          cmp ecx, 0
    49 0000002B 7402                            je e_palindrom
    50 0000002D EB14                            jmp peste
    51                                      
    52                                      e_palindrom:
    53                                          ; afisez cuvantul
    54 0000002F FC                              cld
    55 00000030 68[21000000]                    push dword cuvant
    56 00000035 68[85000000]                    push dword format
    57 0000003A FF15[00000000]                  call [printf]
    58 00000040 83C408                          add esp, 4*2
    59                                      
    60                                      peste:
    61 00000043 5F                              pop edi
    62 00000044 5E                              pop esi
    63 00000045 59                              pop ecx
    64 00000046 83F900                          cmp ecx, 0
    65 00000049 7422                            je final
    66 0000004B EB0D                            jmp urmator
    67                                  
    68                                          ; programul incepe aici
    69                                      start:
    70 0000004D B921000000                      mov ecx, len
    71 00000052 E319                            jecxz final
    72 00000054 FC                              cld
    73 00000055 BE[00000000]                    mov esi, text
    74                                      urmator:
    75 0000005A BB00000000                      mov ebx, 0          ; numar literele din cuvant
    76 0000005F BF[21000000]                    mov edi, cuvant
    77                                      repeta:
    78                                          ; citim caracterul curent
    79 00000064 AC                              lodsb
    80                                          
    81                                          ; verificam daca e spatiu
    82 00000065 3C20                            cmp al, ' '
    83 00000067 7497                            je verific
    84                                          
    85                                          ; nu e spatiu, deci il stocam in sirul 'cuvant'
    86 00000069 AA                              stosb
    87 0000006A 43                              inc ebx             ; am adaugat inca o litera in cuvant
    88 0000006B E2F7                            loop repeta
    89                                  
    90                                      final:
    91 0000006D 6A00                            push dword 0
    92 0000006F FF15[00000000]                  call [exit]
